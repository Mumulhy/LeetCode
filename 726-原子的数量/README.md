# 726-原子的数量

Author：_Mumu

创建日期：2021/7/5

通过日期：2021/7/5

![](https://github.com/Mumulhy/LeetCode/blob/master/726-原子的数量/通过截图2.jpg)

![](https://github.com/Mumulhy/LeetCode/blob/master/726-原子的数量/通过截图1.jpg)

*****

踩过的坑：

1. 上次就是碰见括号嵌套怎么也写不出来只好抄了大佬的代码，之后又碰见括号嵌套怎么也想不出来就放弃了每日一题，这次终于tmd给我写出来了555555
2. 其实还是没想到怎么写于是直接看了题解
3. 但是看了题解也写不出来，细节处理太难了
4. 然后看了一个大佬的解答过程就豁然开朗了
5. 大佬的思路根据我的理解概括一下主要是这三步：①补全缺失的“1”，例如“H2O”补全为“H2O1”；②消解括号，把括号内的数字乘以括号右侧的数字，然后删除括号和括号右侧的数字；③根据原子符号利用哈希表分别计算原子总数，然后排列输出
6. 写的过程中也有一些自己的心得：①补全“1”的同时可以将化学式字符串转化为列表存储，这样就可以在一个位置内直接存储两个字母的元素，同时也可以将数字存储为整形，方便计算；②消解括号前先计算括号个数，每次遍历只消解一个括号，以防删除括号和数字后遍历出错；③消解括号时，先找右括号，再往前找最近的左括号，这样一定没错
7. 最后记得不要在结果里输出“1”
8. 终于学会自己写括号嵌套的代码了，纪念一下！

已解决：32/2152

*****

难度：困难

问题描述：

给定一个化学式formula（作为字符串），返回每种原子的数量。

原子总是以一个大写字母开始，接着跟随0个或任意个小写字母，表示原子的名字。

如果数量大于 1，原子后会跟着数字表示原子的数量。如果数量等于 1 则不会跟数字。例如，H2O 和 H2O2 是可行的，但 H1O2 这个表达是不可行的。

两个化学式连在一起是新的化学式。例如 H2O2He3Mg4 也是化学式。

一个括号中的化学式和数字（可选择性添加）也是化学式。例如 (H2O2) 和 (H2O2)3 是化学式。

给定一个化学式 formula ，返回所有原子的数量。格式为：第一个（按字典序）原子的名字，跟着它的数量（如果数量大于 1），然后是第二个原子的名字（按字典序），跟着它的数量（如果数量大于 1），以此类推。

 

示例 1：

输入：formula = "H2O"
输出："H2O"
解释：
原子的数量是 {'H': 2, 'O': 1}。
示例 2：

输入：formula = "Mg(OH)2"
输出："H2MgO2"
解释： 
原子的数量是 {'H': 2, 'Mg': 1, 'O': 2}。
示例 3：

输入：formula = "K4(ON(SO3)2)2"
输出："K4N2O14S4"
解释：
原子的数量是 {'K': 4, 'N': 2, 'O': 14, 'S': 4}。
示例 4：

输入：formula = "Be32"
输出："Be32"


提示：

1 <= formula.length <= 1000
formula 由小写英文字母、数字 '(' 和 ')' 组成。
formula 是有效的化学式。

来源：力扣（LeetCode）
链接：https://leetcode-cn.com/problems/number-of-atoms